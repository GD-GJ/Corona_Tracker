<!DOCTYPE html>
<html style="height: 100%;">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- stylesheet -->
    <link rel="stylesheet" href="main.css"/>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-datetimepicker/2.5.20/jquery.datetimepicker.css">
        
    <!-- javascript -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>

    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-datetimepicker/2.5.20/jquery.datetimepicker.full.js"></script>
    <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=c2843379aea30a6a4e9269514e395d98&libraries=services,clusterer,drawing"></script>
    
    <title>COVID-19 Tracker</title>
</head>

<body style="height: 100%;">
    <nav class="navbar navbar-light bg-light" style="width: 100%; z-index: 10;">
        <a class="navbar-brand">COVID-19 Tracker</a>
        <form class="form-inline">
            <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
            <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
        </form>
    </nav>
    
    <div class="main page">
        <p>검색하기</p>
        <button type="button" id="search_from_myloc" class="btn btn-primary">현재내위치</button>
        <button type="button" id="show_search_page" class="btn btn-primary">장소검색하기</button>
    </div>
    
    <div class="search page">
        <p>장소 찾기</p>
        <div class="row">
            <div class="col-9">
                <input id='placeName' class='form-control' type="search" placeholder="이동장소 검색" aria-label="이동장소 검색">
            </div>
            <div class="col-3">
                <button id="btn_search_place" class="btn btn-outline-warning" type="submit">검색</button>
            </div>
        </div>

        <div id="SelectPlace" class="list-group" style="width:100%; margin-top:20px; max-height:70vh; overflow: auto;"></div>

        <button type="button" id="btn_select_place" class="btn btn-primary" style="display: none;">확인</button>
    </div>

    <div class="when page">
        <p>시간 입력</p>
        <form class="inputForm" action="index.html" method="post">
            <label>방문일</label>
            <input type="text" id="picker" class="form-control">
            <button type="button" id="searchPath" class="btn btn-primary" >검색</button>
            <button type="button" id="yesterday" class="btn btn-primary">어제</button>
            <button type="button" id="now" class="btn btn-primary">지금</button>
            <script>
                $('#picker').datetimepicker({
                    datepicker:true,
                    timepicker:true
                })

                $('#picker').change(function(){
                    console.log($(this).val().split(' '))
                })

                $('#now').click(function(params) {
                    var d = new Date();
                    let dString = dateStringfier(d);
                    $('#picker').val(dString);
                })

                $('#yesterday').click(function(){
                    let d = new Date();
                    let a = d.getTime()-(1 * 24 * 60 * 60 * 1000)
                    d.setTime(a);
                    let dString = dateStringfier(d);
                    $('#picker').val(dString);
                })
                function dateStringfier(dAte){
                    let year = dAte.getFullYear();
                    let month = dAte.getMonth() + 1;
                    if(month < 10){
                        month = '0' + month;
                    }
                    let date = dAte.getDate()
                    if (date < 10) {
                        date = '0' + date;
                    }

                    let hour = dAte.getHours();
                    if (hour < 10) {
                        hour = '0' + hour;
                    }

                    let minute = dAte.getMinutes();
                    if (minute < 10) {
                        minute = '0' + minute
                    }
                    let dString = year + '/' + month + '/' + date + ' ' + hour + ':' + minute;
                    return dString;
                }
                
            </script>
        </form>
    </div>

    <div class="result page" style="width:100%; overflow: auto;">
        <p>검색 결과</p>
        <div id='map' style="width: 100%; height: 50%;"></div>

        <div class="result_path container">
            <!-- 검색한 장소에 대한 결과페이지 -->
            <div id="result_for_place" class="list-group result_content" style="max-height:40vh; overflow: auto;"></div>
            <button type="button" id="btn_save_path" class="btn btn-primary" >동선 저장하기</button>
        </div>

        <div class="review container">
            <!-- 사용자의 동선들에 대한 결과 페이지 -->
            <p>내 이동동선과 비교하기</p>

            <div class="input-group mb-3">
                <div class="input-group-prepend" id="my_path_list" style="overflow-y:auto">
                  <!--<button class="btn btn-outline-secondary" type="button">Button</button>-->
                </div>
            </div>
            <p id="path_name"></p>
            <div id="result_for_userpaths" class="list-group result_content"  style="max-height:40vh; overflow: auto;"></div>
        </div>
    </div>

    
    <script src="map.js"></script>
    <script src="data.js"></script>
    <script src="userVisit.js"></script>
    <script src="main.js"></script>
    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/7.9.1/firebase-app.js"></script>

    <!-- TODO: Add SDKs for Firebase products that you want to use
        https://firebase.google.com/docs/web/setup#available-libraries -->
    <script src="https://www.gstatic.com/firebasejs/7.9.1/firebase-analytics.js"></script>

    <script>
    // Your web app's Firebase configuration
    var firebaseConfig = {
        apiKey: "AIzaSyDjDAZAK3rzWkTT82-uWtvNZjE0VRpwJBI",
        authDomain: "coronawhere.firebaseapp.com",
        databaseURL: "https://coronawhere.firebaseio.com",
        projectId: "coronawhere",
        storageBucket: "coronawhere.appspot.com",
        messagingSenderId: "1043365572724",
        appId: "1:1043365572724:web:c5c7af753def6758a92121",
        measurementId: "G-YT743B7BNY"
    };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    firebase.analytics();
    </script>
</body>
</html>